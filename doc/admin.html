<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title>SeSQL administration guide</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="sesql-administration-guide">
<h1 class="title">SeSQL administration guide</h1>

<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#django-administration-commands" id="id1">1&nbsp;&nbsp;&nbsp;Django administration commands</a><ul class="auto-toc">
<li><a class="reference internal" href="#syncdb" id="id2">1.1&nbsp;&nbsp;&nbsp;syncdb</a></li>
<li><a class="reference internal" href="#createsqltables" id="id3">1.2&nbsp;&nbsp;&nbsp;createsqltables</a></li>
<li><a class="reference internal" href="#sesqlindex" id="id4">1.3&nbsp;&nbsp;&nbsp;sesqlindex</a></li>
<li><a class="reference internal" href="#sesqlreindex" id="id5">1.4&nbsp;&nbsp;&nbsp;sesqlreindex</a></li>
<li><a class="reference internal" href="#sesqlasyncreindex" id="id6">1.5&nbsp;&nbsp;&nbsp;sesqlasyncreindex</a></li>
<li><a class="reference internal" href="#sesqlupdate" id="id7">1.6&nbsp;&nbsp;&nbsp;sesqlupdate</a></li>
<li><a class="reference internal" href="#sesqlshortquery" id="id8">1.7&nbsp;&nbsp;&nbsp;sesqlshortquery</a></li>
<li><a class="reference internal" href="#sesqllongquery" id="id9">1.8&nbsp;&nbsp;&nbsp;sesqllongquery</a></li>
<li><a class="reference internal" href="#sesqlfixatedate" id="id10">1.9&nbsp;&nbsp;&nbsp;sesqlfixatedate</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sql-level-administration" id="id11">2&nbsp;&nbsp;&nbsp;SQL level administration</a></li>
</ul>
</div>
<div class="section" id="django-administration-commands">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Django administration commands</a></h1>
<div class="section" id="syncdb">
<h2><a class="toc-backref" href="#id2">1.1&nbsp;&nbsp;&nbsp;syncdb</a></h2>
<p>Django <tt class="docutils literal">syncdb</tt> command  will create the SeSQL tables  that were not
created yet. SeSQL <strong>must</strong> be configured before running it.</p>
</div>
<div class="section" id="createsqltables">
<h2><a class="toc-backref" href="#id3">1.2&nbsp;&nbsp;&nbsp;createsqltables</a></h2>
<p>This command  will output  the SQL code  to create the  various tables
required by SeSQL, with <tt class="docutils literal">DROP</tt> statements if needed.</p>
<p>Since there  is no support  for upgrading schemas in  SeSQL currently,
you may have  to use this command and manually edit  the output if you
do changes in SeSQL configuration.</p>
<p>If you have a lot of content to index into SeSQL at once, you may also
try  to create  the tables  without the  <tt class="docutils literal">CREATE&nbsp; INDEX</tt> statements,
insert the data, and then run the <tt class="docutils literal">CREATE INDEX</tt> statements.</p>
</div>
<div class="section" id="sesqlindex">
<h2><a class="toc-backref" href="#id4">1.3&nbsp;&nbsp;&nbsp;sesqlindex</a></h2>
<p>This command  takes a  class name  and an id  as parameters,  and will
reindex into SeSQL the given object.</p>
</div>
<div class="section" id="sesqlreindex">
<h2><a class="toc-backref" href="#id5">1.4&nbsp;&nbsp;&nbsp;sesqlreindex</a></h2>
<p>This command takes only a class name as parameter, and will index into
SeSQL all  objects that exist  in Django tables  but that are  not yet
into  SeSQL. It  is very  useful  if you  just installed  SeSQL on  an
existing database.</p>
<p>This command may  take a long time  and use a lot of  memory.  You can
interrupt it and restart it  later on, it'll continue where it stopped
(objects are reindexed by groups  of 1000, only the current group will
be restarted).</p>
<p>Note :  sesqlreindex will not  consider the <tt class="docutils literal">SKIP_CONDITION</tt>  in its
stats, so you may be in a situation where sesqlreindex will constantly
claim that it  needs to reindex objects, but not  change anything when
executed. The  <tt class="docutils literal">SKIP_CONDITION</tt> is  only checked when  an individual
object is being indexed (whatever  the source of indexation), not when
stats are calculated.</p>
</div>
<div class="section" id="sesqlasyncreindex">
<h2><a class="toc-backref" href="#id6">1.5&nbsp;&nbsp;&nbsp;sesqlasyncreindex</a></h2>
<p>This command will  reindex all your content into a  new set of tables,
allowing  for  configuration  change.  It is  devised  to  not  impact
significantly your production. It is  slightly delicate to use, and is
fully documented in its own documentation file.</p>
</div>
<div class="section" id="sesqlupdate">
<h2><a class="toc-backref" href="#id7">1.6&nbsp;&nbsp;&nbsp;sesqlupdate</a></h2>
<p>This  command  will  massively  reindex  a  single  (or  a  coupe  of)
column. It  will not index any new  object. Typical use is  when a new
column was added.</p>
</div>
<div class="section" id="sesqlshortquery">
<h2><a class="toc-backref" href="#id8">1.7&nbsp;&nbsp;&nbsp;sesqlshortquery</a></h2>
<p>Perform  a short  query. The  first parameter  is a  Python expression
describing  a  Q object,  the  second,  optional  parameter, a  Python
expression specifying the sort order to use.</p>
<p><strong>Warning</strong>  : this  command  uses <tt class="docutils literal">eval()</tt>  to  process the  Python
expressions,  it is  therefore unsafe,  and  should only  be used  for
testing purpose. Never expose this command to untrusted input.</p>
</div>
<div class="section" id="sesqllongquery">
<h2><a class="toc-backref" href="#id9">1.8&nbsp;&nbsp;&nbsp;sesqllongquery</a></h2>
<p>Like the previous command, but performing a long query.</p>
</div>
<div class="section" id="sesqlfixatedate">
<h2><a class="toc-backref" href="#id10">1.9&nbsp;&nbsp;&nbsp;sesqlfixatedate</a></h2>
<p>A  tool  to  recopy a  field  to  another  field  when the  target  is
NULL. Useful when a  date is only existing in some  rows, and you want
it to default to another date field, in a one-shot operation.</p>
</div>
</div>
<div class="section" id="sql-level-administration">
<h1><a class="toc-backref" href="#id11">2&nbsp;&nbsp;&nbsp;SQL level administration</a></h1>
<p>SeSQL contains three kinds of tables :</p>
<ul class="simple">
<li>The <em>master table</em> : this  table doesn't contain any actual content,
but can be requested (with  regular <tt class="docutils literal">SELECT</tt>) to query all indexed
content.</li>
<li>The <em>data  tables</em> : those tables  are defined in the  type map, and
contain  the  actual content;  they  all  inherit from  the  <em>master
table</em>.  Data  can be  inserted,  modified  and deleted  from  those
tables.</li>
<li>The  <em>utility tables</em>  :  they  are used  for  features like  search
history  or  dependency tracking.  Refer  to  each features  for  on
overview of its tables.</li>
</ul>
</div>
</div>
</body>
</html>
