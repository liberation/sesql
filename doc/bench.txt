SeSQL benchmarking tool
=======================

Summary
-------

A small benchmarking tool is provided  with SeSQL to allow yourself to
test your specific configuration and request patterns.

Disclaimer
----------

There are three types of lies  : lies, damn lies and benchmarks. Don't
give any absolute  value to the results you obtain,  and be aware that
reality may be significantly distinct from benchmarks.

Concept of the benchmark tool
-----------------------------

The  SeSQL   benchmark  tool  works  by   running  threads  performing
operations like  short queries, long  queries and indexation.  Each of
those threads  has a tight loop  in which in a  perform one operation,
and then wait a bit, before doing another one.

You can configure how many threads of each kind are used, and how long
they wait between each operation.

Query file
----------

For the  short queries and  long queries  threads, you must  provide a
query file. A query  file is a file with a Q  expression on each line,
for example something like :

::

 Q(classname='Article') & Q(fulltext__containswords="search engine sql")
 Q(classname__in=['Article', 'Blog']) & Q(fulltext__containswords="search engine sql")

Syntax examples
---------------

For a 10 minutes benchmark of a single thread doing continuous queries :

::

 ./manage.py sesqlbench --queryfile=queries.txt --duration=600

For a 10 minutes benchmark of 4 threads doing continuous queries :

::

 ./manage.py sesqlbench --queryfile=queries.txt --duration=600 --short-threads=4

For a 10 minutes benchmark of 2 threads doing continuous short queries
and one doing long queries :

::

 ./manage.py sesqlbench --queryfile=queries.txt --duration=600 --short-threads=2 --long-threads=1

For a 10 minutes benchmark of 2 threads doing continuous short queries
and 1 thread doing regular, but not continuous, reindexation :

::

 ./manage.py sesqlbench --queryfile=queries.txt --duration=600 --short-threads=2 --index-threads=1 --index-delay=0.5 --index-type=Article





